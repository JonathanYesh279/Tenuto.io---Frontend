---
phase: 20-list-pages-and-table-system
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ui/ListPageHero.tsx
  - src/components/ui/Table.tsx
autonomous: true

must_haves:
  truths:
    - "ListPageHero component renders entity-colored hero zone with stat cards, title, and add-action button"
    - "Table rows are denser — py-3 instead of py-4, px-4 instead of px-6 — more rows visible without scrolling"
    - "Table maxHeight calculation accounts for the hero zone height so table content is not clipped prematurely"
  artifacts:
    - path: "src/components/ui/ListPageHero.tsx"
      provides: "Reusable hero stats zone component for list pages"
      contains: "ListPageHero"
    - path: "src/components/ui/Table.tsx"
      provides: "Data-dense table with reduced padding"
      contains: "px-4 py-3"
  key_links:
    - from: "src/components/ui/ListPageHero.tsx"
      to: "src/components/ui/StatsCard.tsx"
      via: "imports and renders StatsCard with coloredBg"
      pattern: "StatsCard.*coloredBg"
    - from: "src/components/ui/ListPageHero.tsx"
      to: "framer-motion"
      via: "stagger entrance animation on stat cards"
      pattern: "staggerChildren"
---

<objective>
Create the shared ListPageHero component and upgrade Table.tsx for data density.

Purpose: These are the foundational pieces that all three list pages (Teachers, Students, Orchestras) will consume in Plan 20-02. The hero zone is the first visual landmark on every list page; the denser table rows maximize data visibility.

Output: ListPageHero.tsx (new shared component) and updated Table.tsx (denser rows, adjusted maxHeight).
</objective>

<execution_context>
@/home/yona279/.claude/get-shit-done/workflows/execute-plan.md
@/home/yona279/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/20-list-pages-and-table-system/20-RESEARCH.md
@.planning/phases/19-dashboard-transformation/19-01-SUMMARY.md
@src/components/ui/StatsCard.tsx
@src/components/ui/Table.tsx
@src/components/domain/AvatarInitials.tsx
@src/pages/Dashboard.tsx (for framer-motion stagger pattern reference)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ListPageHero shared component</name>
  <files>src/components/ui/ListPageHero.tsx</files>
  <action>
Create `src/components/ui/ListPageHero.tsx` — a reusable hero stats zone for the top of every list page.

**Props interface:**
```typescript
interface HeroMetric {
  title: string
  value: string | number
  icon: ReactNode
}

interface ListPageHeroProps {
  title: string                          // Page title (e.g., "מורים")
  entityColor: 'teachers' | 'students' | 'orchestras'
  metrics: HeroMetric[]                  // 3-6 stat metrics
  action?: {
    label: string                        // Button text (e.g., "הוסף מורה")
    onClick: () => void
  }
}
```

**Implementation details:**
1. Hero zone container: `bg-{entityColor}-bg rounded-xl p-6 mb-4` — full-width pastel entity background
2. Header row: flex with `title` as `text-2xl font-bold text-{entityColor}-fg` on the right (RTL start), and optional `action` button on the left (RTL end)
   - Action button: `bg-{entityColor}-fg text-white px-4 py-2 rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2` with a Plus icon from lucide-react
3. Stats grid below header: `grid grid-cols-2 md:grid-cols-3 lg:grid-cols-{N} gap-3` where N matches metrics.length (cap at 6)
   - Each metric renders a StatsCard with `color={entityColor}` and `coloredBg` prop
   - Wrap the grid in framer-motion stagger animation using the EXACT pattern from Dashboard.tsx Phase 19:
     ```typescript
     const containerVariants = {
       hidden: {},
       visible: { transition: { staggerChildren: 0.06 } }
     }
     const itemVariants = {
       hidden: { opacity: 0, y: 12 },
       visible: { opacity: 1, y: 0, transition: { duration: 0.15, ease: 'easeOut' } }
     }
     ```
   - Use `motion.div` wrapping the grid (containerVariants) and each StatsCard item (itemVariants)
   - Y-axis ONLY — no X-axis transforms (RTL safety, per Phase 19 decision)

**Entity color mapping** (build as a const lookup to avoid string interpolation with Tailwind):
```typescript
const ENTITY_STYLES = {
  teachers: { bg: 'bg-teachers-bg', fg: 'text-teachers-fg', btnBg: 'bg-teachers-fg' },
  students: { bg: 'bg-students-bg', fg: 'text-students-fg', btnBg: 'bg-students-fg' },
  orchestras: { bg: 'bg-orchestras-bg', fg: 'text-orchestras-fg', btnBg: 'bg-orchestras-fg' },
} as const
```
This avoids dynamic Tailwind class generation (which gets tree-shaken).

**Imports:** motion from framer-motion, StatsCard from ./StatsCard, Plus from lucide-react, clsx.

Export as named export: `export function ListPageHero(...)`.
  </action>
  <verify>
File exists at src/components/ui/ListPageHero.tsx. Contains: ListPageHero function export, ENTITY_STYLES const, containerVariants/itemVariants, imports StatsCard, imports motion from framer-motion, uses coloredBg prop on StatsCard.
  </verify>
  <done>
ListPageHero component is a complete reusable hero zone: renders entity-colored background, animated stat card grid, title, and optional add-action button. Ready to wire into all three list pages.
  </done>
</task>

<task type="auto">
  <name>Task 2: Upgrade Table.tsx for data density and hero-aware maxHeight</name>
  <files>src/components/ui/Table.tsx</files>
  <action>
Modify `src/components/ui/Table.tsx` to increase data density and handle the taller page layout:

1. **Reduce cell padding** — make table rows more compact:
   - TH elements: change `px-6 py-3` to `px-4 py-3` (horizontal reduction only — header height stays)
   - TD elements: change `px-6 py-4` to `px-4 py-3` (both horizontal and vertical reduction)
   - Actions TD: same `px-4 py-3` (was `px-6 py-4`)

2. **Update maxHeight calculation** for hero zone:
   - Current: `max-h-[calc(100vh-280px)]`
   - Change to: `max-h-[calc(100vh-380px)]`
   - This accounts for: hero zone (~180px) + filter toolbar (~52px) + header (~64px) + buffer (~24px) + pagination (~60px) = ~380px
   - This prevents the table from being clipped when the hero zone adds ~100px of additional height above it

3. **Update hover row color** to match the new design language:
   - Change `hover:bg-amber-50/60` to `hover:bg-gray-50` (both the clickable and non-clickable rows)
   - The warm amber hover was v2.0; v2.1 uses neutral light gray

4. **Update action button styling** to icon-only design (no text labels):
   - View button: change from `inline-flex items-center px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200` to `p-1.5 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors`
   - Delete button: change from `inline-flex items-center px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200` to `p-1.5 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors`
   - Remove the text content from action buttons — keep only icons. Change icon size from `w-3 h-3` to `w-4 h-4`
   - Remove the `ml-1` margin class from icons (no text label to space from)

Do NOT change: column render functions, data mapping, StatusBadge import, row click handlers, keyboard navigation, aria attributes, pagination logic.
  </action>
  <verify>
Grep Table.tsx for `px-4 py-3` (should appear in TH and TD). Grep for `100vh-380px` (updated maxHeight). Grep for `hover:bg-gray-50` (new hover). Verify no `px-6 py-4` remains in cell classes. Verify action buttons use `p-1.5` icon-only pattern without text labels.
  </verify>
  <done>
Table.tsx has denser rows (px-4 py-3), hero-aware maxHeight (380px offset), neutral gray hover, and icon-only action buttons. Rows display approximately 25% more data above the fold.
  </done>
</task>

</tasks>

<verification>
1. `src/components/ui/ListPageHero.tsx` exists and exports `ListPageHero` function
2. ListPageHero uses entity color lookup (not dynamic Tailwind classes)
3. ListPageHero renders framer-motion stagger with Y-axis-only variants
4. ListPageHero renders StatsCard with `coloredBg` prop
5. Table.tsx uses `px-4 py-3` for all TD cells (denser than before)
6. Table.tsx maxHeight is `calc(100vh-380px)` (accounts for hero zone)
7. Table.tsx hover is `hover:bg-gray-50` (neutral, not warm amber)
8. Table.tsx action buttons are icon-only with `p-1.5` compact styling
9. `npm run build` succeeds without errors
</verification>

<success_criteria>
- ListPageHero.tsx is a complete, reusable component ready for all three list pages
- Table.tsx shows visibly denser rows with more data above fold
- No regression in existing Table features (row click, sorting, actions)
- Build passes
</success_criteria>

<output>
After completion, create `.planning/phases/20-list-pages-and-table-system/20-01-SUMMARY.md`
</output>
