---
phase: 22-visual-architecture-rewrite
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/index.css
  - tailwind.config.js
  - src/components/ui/button.tsx
autonomous: true

must_haves:
  truths:
    - "CSS variables produce cool neutral palette — no warm tint visible anywhere"
    - "Primary button renders as black with white text across all pages"
    - "Corner radius is 2px on all Radix/shadcn components (not 12px)"
    - "Shadows are removed from decorative elements — only interaction layers retain shadow"
    - "Entity colors exist but are subdued — tints not vivid pastels"
  artifacts:
    - path: "src/index.css"
      provides: "Complete cool neutral token system with dark sidebar tokens"
      contains: "--primary: 0 0% 0%"
    - path: "tailwind.config.js"
      provides: "Token mapping for new palette"
    - path: "src/components/ui/button.tsx"
      provides: "Black primary button with explicit hover state"
  key_links:
    - from: "src/index.css"
      to: "tailwind.config.js"
      via: "CSS variables consumed by Tailwind hsl(var()) pattern"
      pattern: "hsl\\(var\\(--"
    - from: "src/components/ui/button.tsx"
      to: "src/index.css"
      via: "bg-primary reads --primary CSS var"
      pattern: "bg-primary"
---

<objective>
Replace the entire token foundation — CSS custom properties, shadow scale, radius, and entity colors — with a cool neutral palette. Black primary buttons, 2px radius, deep charcoal sidebar tokens, subdued entity pastels, zero decorative shadow.

Purpose: Every subsequent plan inherits from these tokens. This single change transforms the color temperature and shape language of the entire app. The warm coral/amber v2.1 identity is replaced with a cool, architectural, Linear/Vercel-direction aesthetic.

Output: Updated index.css :root, tailwind.config.js, button.tsx
</objective>

<execution_context>
@/home/yona279/.claude/get-shit-done/workflows/execute-plan.md
@/home/yona279/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ARCHETYPES.md
@.planning/phases/22-visual-architecture-rewrite/22-RESEARCH.md
@src/index.css
@tailwind.config.js
@src/components/ui/button.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace CSS custom properties with cool neutral token system</name>
  <files>src/index.css</files>
  <action>
Replace all CSS custom properties in `:root` inside `@layer base` with the cool neutral palette. Exact target values from research:

```css
/* Cool neutral palette */
--background: 0 0% 100%;           /* true white */
--foreground: 220 15% 11%;         /* near-black, cool */
--card: 0 0% 100%;                 /* white */
--card-foreground: 220 15% 11%;
--popover: 0 0% 100%;
--popover-foreground: 220 15% 11%;
--primary: 0 0% 0%;               /* BLACK — locked decision */
--primary-foreground: 0 0% 100%;
--secondary: 220 14% 96%;
--secondary-foreground: 220 15% 11%;
--muted: 220 14% 96%;             /* cool light gray */
--muted-foreground: 220 10% 46%;
--accent: 220 14% 96%;            /* neutral accent, not amber */
--accent-foreground: 220 15% 11%;
--destructive: 0 72% 50%;         /* keep red */
--destructive-foreground: 0 0% 100%;
--border: 220 13% 91%;            /* cool gray */
--input: 220 13% 91%;
--ring: 220 15% 11%;              /* dark ring, not coral */
--radius: 0.125rem;               /* 2px — locked: sharp 2-4px */
```

Dark sidebar tokens:
```css
--sidebar: 220 20% 13%;           /* deep charcoal */
--sidebar-foreground: 0 0% 94%;   /* near-white text */
--sidebar-border: 220 15% 20%;    /* subtle dark border */
--sidebar-active-bg: 220 15% 22%; /* slightly lighter pill */
--sidebar-active-fg: 0 0% 100%;   /* white active text */
--sidebar-label: 220 10% 55%;     /* muted section labels */
```

Subdued entity colors (thin accent use only, not vivid pastel surfaces):
```css
--color-students-bg:   252 40% 96%;
--color-students-fg:   252 55% 40%;
--color-teachers-bg:   200 35% 95%;
--color-teachers-fg:   200 65% 35%;
--color-orchestras-bg: 45 40% 95%;
--color-orchestras-fg: 38 75% 35%;
--color-rehearsals-bg: 340 40% 95%;
--color-rehearsals-fg: 340 50% 38%;
--color-bagrut-bg:     145 40% 94%;
--color-bagrut-fg:     145 50% 30%;
--color-theory-bg:     170 40% 94%;
--color-theory-fg:     170 50% 30%;
```

Updated shadow scale — zero decorative shadow, interaction-only:
```css
--shadow-0: none;
--shadow-1: none;                  /* was decorative — now none */
--shadow-2: 0 2px 8px -2px rgba(0,0,0,0.12), 0 1px 4px -1px rgba(0,0,0,0.08);
--shadow-3: 0 8px 24px -4px rgba(0,0,0,0.16), 0 4px 12px -2px rgba(0,0,0,0.10);
--shadow-4: 0 16px 40px -4px rgba(0,0,0,0.20), 0 8px 16px -4px rgba(0,0,0,0.12);
```

Updated warm neutral scale to cool neutral:
```css
--neutral-50:  hsl(220 14% 98%);
--neutral-100: hsl(220 13% 95%);
--neutral-200: hsl(220 12% 91%);
--neutral-300: hsl(220 11% 82%);
--neutral-400: hsl(220 10% 68%);
--neutral-500: hsl(220 8% 52%);
--neutral-600: hsl(220 8% 40%);
--neutral-700: hsl(220 8% 30%);
--neutral-800: hsl(220 8% 20%);
--neutral-900: hsl(220 8% 12%);
```

Updated surface elevation (cool tint):
```css
--surface-base:     hsl(220 14% 98%);
--surface-raised:   hsl(0 0% 100%);
--surface-overlay:  hsl(0 0% 100%);
--surface-floating: hsl(0 0% 100%);
```

Keep the Phase 6 comment header but update it to say "Phase 22: Visual Architecture Rewrite — cool neutral palette". Keep all other non-:root CSS (font-face, tailwind imports, utility classes) untouched.
  </action>
  <verify>Grep for `--primary: 0 0% 0%` in src/index.css. Grep for `--radius: 0.125rem` in src/index.css. Grep for `--sidebar: 220 20% 13%` in src/index.css. All three must be found.</verify>
  <done>All :root CSS variables updated to cool neutral values. No warm tint remains. Sidebar tokens are deep charcoal. Entity colors are subdued. Shadow-1 is none. Radius is 2px.</done>
</task>

<task type="auto">
  <name>Task 2: Update button.tsx default variant with explicit black hover and update tailwind.config.js if needed</name>
  <files>src/components/ui/button.tsx, tailwind.config.js</files>
  <action>
In `src/components/ui/button.tsx`, update the `default` variant to have an explicit hover state for black buttons:

```tsx
default: "bg-primary text-primary-foreground hover:bg-neutral-800 active:bg-neutral-900"
```

This replaces the current `hover:bg-primary/90` which would be `rgba(0,0,0,0.9)` — nearly invisible change on black. `hover:bg-neutral-800` provides a visible lighter shift.

In `tailwind.config.js`, verify that the entity color tokens (`teachers-bg`, `teachers-fg`, etc.) map correctly via the `hsl(var(--color-*))` pattern. If any hardcoded warm values exist in the Tailwind config color definitions (e.g., explicit hex for `primary-500`), document them in a comment but do NOT remove them yet — the `bg-primary-500` class migration is handled in a later plan (22-03). Ensure the shadow utilities map to the updated CSS vars.

Also verify that `--radius` flows correctly through the shadcn radius scale in tailwind.config.js. The config should use `var(--radius)` for its border-radius values so the 0.125rem change propagates.
  </action>
  <verify>Read button.tsx and confirm `hover:bg-neutral-800` is present in the default variant. Read tailwind.config.js and confirm entity color tokens map to CSS vars.</verify>
  <done>Button default variant has explicit black hover. Tailwind config correctly maps to CSS variable system. The token foundation is complete — all subsequent plans inherit this palette.</done>
</task>

</tasks>

<verification>
1. `grep -c "0 0% 0%" src/index.css` returns at least 1 (--primary is black)
2. `grep -c "0.125rem" src/index.css` returns at least 1 (--radius is 2px)
3. `grep -c "220 20% 13%" src/index.css` returns at least 1 (--sidebar is charcoal)
4. `grep "shadow-1" src/index.css` shows `none` (no decorative shadow)
5. `grep "hover:bg-neutral-800" src/components/ui/button.tsx` returns match
</verification>

<success_criteria>
- CSS custom properties are entirely cool neutral — zero warm tint
- --primary is black (0 0% 0%)
- --radius is 0.125rem (2px)
- Sidebar tokens are deep charcoal
- Entity colors are subdued
- Shadow-1 is none (decorative shadow eliminated)
- Button default variant has visible black hover
</success_criteria>

<output>
After completion, create `.planning/phases/22-visual-architecture-rewrite/22-01-SUMMARY.md`
</output>
