---
phase: 18-typography-scale-and-color-evolution
plan: 02
type: execute
wave: 2
depends_on: ["18-01"]
files_modified:
  - src/components/Sidebar.tsx
autonomous: true

must_haves:
  truths:
    - "Sidebar background is white — the dark warm navy from v2.0 is completely gone"
    - "Active navigation item has a violet/pastel colored pill background, not a dark tint"
    - "Category labels (MENU, OTHER) are visible with appropriate styling for a white surface"
    - "Role badges use saturated dark text colors that are legible on a white background — not washed-out *-300 colors"
    - "Search input uses solid light colors appropriate for a white sidebar — not opacity-relative classes"
    - "Brand logo appears at the top of the sidebar"
  artifacts:
    - path: "src/components/Sidebar.tsx"
      provides: "Light sidebar with entity color active pill, logo zone, and white-surface-appropriate styling"
      contains: "sidebar-active-bg"
  key_links:
    - from: "src/components/Sidebar.tsx"
      to: "src/index.css"
      via: "Tailwind utilities consuming sidebar CSS vars"
      pattern: "sidebar-active"
---

<objective>
Restyle the Sidebar from dark warm navy to a white/light design with colored active pills, a brand logo zone, and white-surface-appropriate color treatment for all interactive elements.

Purpose: The sidebar is the most prominent UI element in the application. Changing it from dark to light is the single most impactful visual transformation — it instantly makes the app look like a completely different product. Per user decision: "light/white sidebar with grouped navigation sections, active item with a soft colored background pill, lightweight icons + text labels, clean brand logo at top."

Output: Updated `src/components/Sidebar.tsx` with all dark-surface class references replaced by white-surface equivalents, logo zone added, active pill using entity color tokens.
</objective>

<execution_context>
@/home/yona279/.claude/get-shit-done/workflows/execute-plan.md
@/home/yona279/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/18-typography-scale-and-color-evolution/18-RESEARCH.md
@.planning/phases/18-typography-scale-and-color-evolution/18-01-SUMMARY.md
@src/components/Sidebar.tsx
@src/index.css
@tailwind.config.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Restyle sidebar container, search, role badges, and add logo zone</name>
  <files>src/components/Sidebar.tsx</files>
  <action>
Make the following className changes in `src/components/Sidebar.tsx`. The core token change (`--sidebar: 0 0% 100%`) from plan 18-01 auto-propagates to all `bg-sidebar` and `text-sidebar-foreground` usages, but opacity-relative classes and dark-surface-optimized colors need manual replacement.

**1. Sidebar main container (line ~474):**
Replace:
```
border-l border-sidebar-foreground/10 shadow-[-4px_0_6px_-1px_rgba(0,0,0,0.2)]
```
With:
```
border-l border-sidebar-border shadow-1
```
Uses the new `--sidebar-border` token and Phase 16 shadow token instead of hardcoded rgba and opacity-relative border.

**2. Desktop toggle button (line ~484):**
Replace:
```
bg-sidebar-foreground/10 rounded-lg border border-sidebar-foreground/20 hover:bg-sidebar-foreground/15 hover:border-sidebar-foreground/30
```
With:
```
bg-gray-100 rounded-lg border border-gray-200 hover:bg-gray-200 hover:border-gray-300
```
Solid colors appropriate for white surface — opacity-relative classes of a near-black foreground create too-dark tints on white.

Also update the icon color in the toggle button:
Replace `text-sidebar-foreground/70` with `text-gray-500`

**3. Search section border (line ~495):**
Replace `border-b border-sidebar-foreground/10` with `border-b border-sidebar-border`

**4. Search input (line ~503):**
Replace:
```
bg-sidebar-foreground/10 border border-sidebar-foreground/20 ... placeholder:text-sidebar-foreground/40 ... focus:ring-2 focus:ring-sidebar-foreground/30 focus:border-sidebar-foreground/30
```
With:
```
bg-gray-50 border border-gray-200 ... placeholder:text-gray-400 ... focus:ring-2 focus:ring-primary/30 focus:border-primary/40
```
Search icon: replace `text-sidebar-foreground/40` with `text-gray-400`

**5. Role badges section border (line ~510):**
Replace `border-b border-sidebar-foreground/10` with `border-b border-sidebar-border`

**6. getRoleBadgeColor function (line ~365-373):**
Replace the entire function body. Old colors used *-300 text which is unreadable on white. New colors:
```typescript
const getRoleBadgeColor = (role: string): string => {
  switch (role) {
    case 'admin': return 'bg-red-100 text-red-700'
    case 'teacher': return 'bg-blue-100 text-blue-700'
    case 'conductor': return 'bg-green-100 text-green-700'
    case 'theory-teacher': return 'bg-yellow-100 text-yellow-700'
    default: return 'bg-gray-100 text-gray-600'
  }
}
```

**7. Loading skeleton (line ~529-533):**
Replace `bg-sidebar-foreground/20` with `bg-gray-200` (3 instances in the skeleton pulse divs)

**8. Category label button (line ~543-544):**
Replace `text-sidebar-foreground/50 ... hover:text-sidebar-foreground/70` with `text-sidebar-label hover:text-gray-700`

**9. Quick actions section border (line ~594):**
Replace `border-t border-sidebar-foreground/10` with `border-t border-sidebar-border`

**10. Quick actions label (line ~595):**
Replace `text-sidebar-foreground/50` with `text-sidebar-label`

**11. Quick action button text (line ~605):**
Replace `text-sidebar-foreground/70 hover:bg-sidebar-foreground/10 hover:text-sidebar-foreground` with `text-gray-600 hover:bg-gray-100 hover:text-gray-900`

**12. Quick action icons — Plus and Icon (line ~617):**
Replace `group-hover:text-sidebar-foreground` with `group-hover:text-gray-900`

**13. Add brand logo zone at top of sidebar:**
Add a logo section BEFORE the search section (before line ~494). Insert after the desktop toggle button's closing `)}`:

```tsx
{/* Brand Logo */}
<div className="px-6 py-5 border-b border-sidebar-border flex-shrink-0">
  <img
    src="/logo.png"
    alt="Tenuto"
    className="h-8 w-auto object-contain"
  />
</div>
```

This creates a clean brand zone at the top of the sidebar, matching the SchoolHub reference pattern.
  </action>
  <verify>
Read src/components/Sidebar.tsx and confirm:
1. No instances of `sidebar-foreground/` remain (opacity-relative classes are all replaced)
2. `border-sidebar-border` is used for borders instead of `border-sidebar-foreground/10`
3. `shadow-1` replaces the hardcoded `shadow-[-4px_...]`
4. getRoleBadgeColor returns `*-100` bg and `*-700` text (white-surface-legible)
5. Logo zone exists with `/logo.png` image
6. `text-sidebar-label` is used for category headers
7. Search input uses solid `bg-gray-50` and `border-gray-200`
  </verify>
  <done>Sidebar container, search, role badges, skeleton, category labels, quick actions, and desktop toggle all use white-surface-appropriate solid colors — no opacity-relative classes of sidebar-foreground remain</done>
</task>

<task type="auto">
  <name>Task 2: Update active nav item and hover states to use entity color pill</name>
  <files>src/components/Sidebar.tsx</files>
  <action>
Update the navigation item styling in `src/components/Sidebar.tsx` to use the new active pill tokens and white-surface hover states.

**1. Active nav item (line ~567-571):**
The NavLink className function currently uses:
```
active
  ? 'bg-sidebar-foreground/15 text-sidebar-foreground font-semibold border border-sidebar-foreground/20'
  : 'text-sidebar-foreground/70 hover:bg-sidebar-foreground/10 hover:text-sidebar-foreground'
```

Replace with:
```
active
  ? 'bg-sidebar-active-bg text-sidebar-active-fg font-semibold'
  : 'text-gray-600 hover:bg-gray-100 hover:text-gray-900'
```

Key changes:
- Active: Uses `bg-sidebar-active-bg` (violet pastel pill) and `text-sidebar-active-fg` (violet text) — no border needed for active pill
- Inactive: Uses solid gray hover states appropriate for white surface — no opacity-relative classes

**2. Multi-role badge text inside nav items (line ~578):**
The inline role badge uses `getRoleBadgeColor(item.roles[0])` which is already updated in Task 1, so the badge styling flows automatically.

**3. Navigation item icon position (line ~583):**
The icon currently has no special color treatment. On white sidebar, the icon inherits text color from the parent NavLink, which is correct. No change needed — the `text-sidebar-active-fg` / `text-gray-600` from the parent will cascade to the icon.

**4. Remove border from active state:**
The old active style had `border border-sidebar-foreground/20`. The new active pill should NOT have a border — it's a soft colored background fill only. Confirm the replacement in step 1 above does not include any border class in the active state.
  </action>
  <verify>
Read src/components/Sidebar.tsx and confirm:
1. Active nav uses `bg-sidebar-active-bg text-sidebar-active-fg font-semibold` (no border)
2. Inactive nav uses `text-gray-600 hover:bg-gray-100 hover:text-gray-900`
3. No remaining `sidebar-foreground/` references in the entire file (search for the pattern)
4. The overall NavLink className is clean and readable
  </verify>
  <done>Active navigation items display a violet pastel pill background; inactive items show gray hover on white surface — the sidebar is visually a light/white design with colored accent, no dark remnants</done>
</task>

</tasks>

<verification>
1. Zero instances of `sidebar-foreground/` pattern remain in Sidebar.tsx (grep)
2. `bg-sidebar-active-bg` appears for active nav styling
3. `text-sidebar-label` appears for category headers
4. `border-sidebar-border` appears for all sidebar borders
5. `shadow-1` replaces the hardcoded sidebar shadow
6. Role badge colors use `*-700` text (contrast-safe on white)
7. Logo zone exists with img tag
8. Search uses solid `bg-gray-50` instead of opacity-relative background
</verification>

<success_criteria>
- The sidebar renders with a white background and near-black text (automatic from 18-01 token changes)
- Active navigation item shows a violet pastel pill (bg-sidebar-active-bg)
- All interactive elements (search, toggle, links) use solid colors appropriate for a white surface
- Role badges are legible with saturated dark text on light pastel backgrounds
- Brand logo appears at the top of the sidebar
- The sidebar is visually unrecognizable compared to the dark v2.0 version
</success_criteria>

<output>
After completion, create `.planning/phases/18-typography-scale-and-color-evolution/18-02-SUMMARY.md`
</output>
