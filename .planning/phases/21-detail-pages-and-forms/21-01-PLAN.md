---
phase: 21-detail-pages-and-forms
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/domain/DetailPageHeader.tsx
  - src/features/teachers/details/components/TeacherDetailsPage.tsx
  - src/features/students/details/components/StudentDetailsPage.tsx
  - src/features/orchestras/details/components/OrchestraDetailsPage.tsx
autonomous: true

must_haves:
  truths:
    - "Detail page header zone uses entity-colored pastel background instead of generic coral gradient — teachers=sky, students=violet, orchestras=amber"
    - "Entity name is the largest, boldest element in the header zone — clear primary/secondary hierarchy between name and metadata"
    - "Active tab on each detail page has entity-colored pill background — unmistakable at a glance, not a thin underline"
    - "Badge pills in the header use entity-colored semi-transparent background instead of white/20 on gradient"
  artifacts:
    - path: "src/components/domain/DetailPageHeader.tsx"
      provides: "Entity-aware detail page header with pastel background, avatar, name hierarchy"
      contains: "ENTITY_DETAIL_STYLES"
    - path: "src/features/teachers/details/components/TeacherDetailsPage.tsx"
      provides: "Teacher detail page with entityColor='teachers' and entity-colored tab active states"
      contains: "entityColor"
    - path: "src/features/students/details/components/StudentDetailsPage.tsx"
      provides: "Student detail page with entityColor='students' and entity-colored tab active states"
      contains: "entityColor"
    - path: "src/features/orchestras/details/components/OrchestraDetailsPage.tsx"
      provides: "Orchestra detail page with entityColor='orchestras' and entity-colored tab active states"
      contains: "entityColor"
  key_links:
    - from: "src/components/domain/DetailPageHeader.tsx"
      to: "ENTITY_DETAIL_STYLES static const"
      via: "entityColor prop lookup"
      pattern: "ENTITY_DETAIL_STYLES\\[entityColor\\]"
    - from: "TeacherDetailsPage.tsx"
      to: "DetailPageHeader"
      via: "entityColor='teachers' prop"
      pattern: "entityColor.*teachers"
    - from: "StudentDetailsPage.tsx"
      to: "DetailPageHeader"
      via: "entityColor='students' prop"
      pattern: "entityColor.*students"
    - from: "OrchestraDetailsPage.tsx"
      to: "DetailPageHeader"
      via: "entityColor='orchestras' prop"
      pattern: "entityColor.*orchestras"
---

<objective>
Restyle the shared DetailPageHeader component with an entity-colored pastel header zone (replacing the generic coral gradient) and restyle tab navigation on all three detail pages (Teacher, Student, Orchestra) with entity-colored active tab pill fills.

Purpose: Transform detail pages from generic template styling to entity-aware, intentionally designed pages that feel consistent with the new dashboard and list page visual language from Phases 18-20.

Output: Updated DetailPageHeader with entityColor prop + restyled tabs on 3 detail pages.
</objective>

<execution_context>
@/home/yona279/.claude/get-shit-done/workflows/execute-plan.md
@/home/yona279/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md
@.planning/phases/21-detail-pages-and-forms/21-RESEARCH.md
@src/components/domain/DetailPageHeader.tsx
@src/components/ui/ListPageHero.tsx (reference: ENTITY_STYLES static const pattern)
@src/features/teachers/details/components/TeacherDetailsPage.tsx
@src/features/students/details/components/StudentDetailsPage.tsx
@src/features/orchestras/details/components/OrchestraDetailsPage.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add entity-colored header zone to DetailPageHeader</name>
  <files>src/components/domain/DetailPageHeader.tsx</files>
  <action>
Modify `DetailPageHeader.tsx` to support an optional `entityColor` prop that switches the header from generic gradient to entity-colored pastel zone.

**CRITICAL: Use static const lookup, NOT string interpolation** (Tailwind tree-shake safety — same pattern as ListPageHero ENTITY_STYLES from Phase 20-01).

1. Add `entityColor?: 'teachers' | 'students' | 'orchestras'` to the `DetailPageHeaderProps` interface.

2. Add a static const lookup ABOVE the component:
```tsx
const ENTITY_DETAIL_STYLES = {
  teachers:   { headerBg: 'bg-teachers-bg',   nameFg: 'text-teachers-fg',   badgeBg: 'bg-teachers-fg/10', badgeText: 'text-teachers-fg', avatarBg: 'bg-teachers-fg/15 text-teachers-fg', border: 'border-teachers-fg/15' },
  students:   { headerBg: 'bg-students-bg',   nameFg: 'text-students-fg',   badgeBg: 'bg-students-fg/10', badgeText: 'text-students-fg', avatarBg: 'bg-students-fg/15 text-students-fg', border: 'border-students-fg/15' },
  orchestras: { headerBg: 'bg-orchestras-bg', nameFg: 'text-orchestras-fg', badgeBg: 'bg-orchestras-fg/10', badgeText: 'text-orchestras-fg', avatarBg: 'bg-orchestras-fg/15 text-orchestras-fg', border: 'border-orchestras-fg/15' },
} as const
```

3. In the component body, resolve styles:
```tsx
const entityStyles = entityColor ? ENTITY_DETAIL_STYLES[entityColor] : null
```

4. Replace the gradient strip div. When `entityStyles` is present:
   - Outer div: `className={cn('rounded-xl p-6 border', entityStyles.headerBg, entityStyles.border)}` (entity-colored pastel bg with subtle entity border)
   - Name h1: `className={cn('text-2xl font-bold truncate', entityStyles.nameFg)}` (entity-fg color, not white)
   - updatedAt text: `className="text-muted-foreground text-sm mt-1"` (not white/80 — muted text on pastel reads well)
   - Avatar colorClassName: use `entityStyles.avatarBg` instead of `getAvatarColorClasses`

   When `entityStyles` is null (no entityColor prop), keep the existing gradient strip as fallback for backward compatibility: `bg-gradient-to-l from-primary to-accent text-white`.

5. The `badges` ReactNode is rendered by the consumer (detail page). However, the consumer currently passes `bg-white/20` which looks wrong on a pastel background. To avoid changing every consumer at once, DO NOT try to style badges from within DetailPageHeader — the consumers will be updated in the same task's detail page changes below.

Import `cn` from `@/lib/utils` if not already imported.
  </action>
  <verify>
Run `grep -n "ENTITY_DETAIL_STYLES" src/components/domain/DetailPageHeader.tsx` — should show the static const.
Run `grep -n "entityColor" src/components/domain/DetailPageHeader.tsx` — should show prop definition and usage.
Confirm no string interpolation like `bg-${entityColor}` exists in the file.
  </verify>
  <done>
DetailPageHeader accepts entityColor prop and renders entity-colored pastel header when provided, with backward-compatible gradient fallback when not. Static const ENTITY_DETAIL_STYLES is used for all entity color class lookups.
  </done>
</task>

<task type="auto">
  <name>Task 2: Wire entityColor and restyle tabs on all three detail pages</name>
  <files>
    src/features/teachers/details/components/TeacherDetailsPage.tsx
    src/features/students/details/components/StudentDetailsPage.tsx
    src/features/orchestras/details/components/OrchestraDetailsPage.tsx
  </files>
  <action>
For each of the three detail pages, make two changes:

**Change A: Pass entityColor to DetailPageHeader**

In each page, add the `entityColor` prop to the `<DetailPageHeader>` component:
- TeacherDetailsPage: `entityColor="teachers"`
- StudentDetailsPage: `entityColor="students"`
- OrchestraDetailsPage: `entityColor="orchestras"`

Also update the badge pills that the detail page passes as the `badges` prop. Currently all three pages use `bg-white/20` which was designed for the old dark gradient. Replace with entity-appropriate styling:

- TeacherDetailsPage badges: change `className="px-3 py-1 bg-white/20 rounded-full text-sm font-medium"` to `className="px-3 py-1 bg-teachers-fg/10 text-teachers-fg rounded-full text-sm font-medium"`
- StudentDetailsPage badges: change to `className="px-3 py-1 bg-students-fg/10 text-students-fg rounded-full text-sm font-medium"`
- OrchestraDetailsPage badges: change to `className="px-3 py-1 bg-orchestras-fg/10 text-orchestras-fg rounded-full text-sm font-medium"`

**Change B: Add entity-colored active tab pills**

In each page, add active state override classes to ALL `TabsTrigger` components. Do NOT edit the global `tabs.tsx` — override via className on each TabsTrigger.

For TeacherDetailsPage, add to each TabsTrigger className:
```
data-[state=active]:bg-teachers-bg data-[state=active]:text-teachers-fg data-[state=active]:shadow-none rounded-lg px-3 py-1.5 text-sm font-medium transition-colors
```

For StudentDetailsPage, add to each TabsTrigger className:
```
data-[state=active]:bg-students-bg data-[state=active]:text-students-fg data-[state=active]:shadow-none rounded-lg px-3 py-1.5 text-sm font-medium transition-colors
```

For OrchestraDetailsPage, add to each TabsTrigger className:
```
data-[state=active]:bg-orchestras-bg data-[state=active]:text-orchestras-fg data-[state=active]:shadow-none rounded-lg px-3 py-1.5 text-sm font-medium transition-colors
```

Each TabsTrigger should keep its existing `gap-2 inline-flex items-center` classes. The full className for a teacher tab trigger should look like:
```
className="gap-2 inline-flex items-center data-[state=active]:bg-teachers-bg data-[state=active]:text-teachers-fg data-[state=active]:shadow-none rounded-lg px-3 py-1.5 text-sm font-medium transition-colors"
```

For StudentDetailsPage, also keep the existing `whitespace-nowrap` class on each TabsTrigger.

**What NOT to change:**
- Do NOT modify the TabsList className (sticky, border-b, bg-white — keep as-is)
- Do NOT modify AnimatePresence or motion.div
- Do NOT modify any tab content components
- Do NOT modify state management, data fetching, or error handling
- Do NOT touch `StudentDetailsHeader.tsx` (dead code, leave untouched)
  </action>
  <verify>
Run `grep -n "entityColor" src/features/teachers/details/components/TeacherDetailsPage.tsx` — should show entityColor="teachers".
Run `grep -n "entityColor" src/features/students/details/components/StudentDetailsPage.tsx` — should show entityColor="students".
Run `grep -n "entityColor" src/features/orchestras/details/components/OrchestraDetailsPage.tsx` — should show entityColor="orchestras".
Run `grep "data-\[state=active\]:bg-teachers" src/features/teachers/details/components/TeacherDetailsPage.tsx` — should match all TabsTrigger elements.
Run `grep "data-\[state=active\]:bg-students" src/features/students/details/components/StudentDetailsPage.tsx` — should match.
Run `grep "data-\[state=active\]:bg-orchestras" src/features/orchestras/details/components/OrchestraDetailsPage.tsx` — should match.
Confirm no TabsTrigger in any detail page still uses the default (non-entity) active state.
  </verify>
  <done>
All three detail pages pass entity-appropriate entityColor prop to DetailPageHeader, badges use entity-colored semi-transparent backgrounds instead of white/20, and every TabsTrigger on every detail page has entity-colored active pill styling.
  </done>
</task>

</tasks>

<verification>
1. `grep -rn "ENTITY_DETAIL_STYLES" src/components/domain/DetailPageHeader.tsx` returns the static const
2. `grep -rn "entityColor" src/components/domain/DetailPageHeader.tsx src/features/*/details/components/*DetailsPage.tsx` shows prop passing for all 3 entities
3. `grep "bg-white/20" src/features/*/details/components/*DetailsPage.tsx` returns ZERO matches (old gradient badge style fully replaced)
4. `grep "data-\[state=active\]:bg-" src/features/*/details/components/*DetailsPage.tsx` returns matches on every TabsTrigger
5. No string interpolation like `bg-${` exists in any modified file
</verification>

<success_criteria>
- DetailPageHeader renders entity-colored pastel zones when entityColor prop is provided
- All 3 detail pages pass the correct entityColor (teachers/students/orchestras)
- All tab triggers on all 3 detail pages have entity-colored active state pills
- Badge pills use entity-colored backgrounds instead of white/20
- Backward compatibility: DetailPageHeader without entityColor still renders gradient
- No edits to global tabs.tsx primitive
</success_criteria>

<output>
After completion, create `.planning/phases/21-detail-pages-and-forms/21-01-SUMMARY.md`
</output>
