---
phase: 16-token-foundation
plan: 02
type: execute
wave: 2
depends_on: ["16-01"]
files_modified:
  - tailwind.config.js
  - src/lib/motionTokens.ts
  - .planning/phases/16-token-foundation/COLOR-INVENTORY.md
autonomous: true

must_haves:
  truths:
    - "Tailwind generates shadow-0 through shadow-4 utility classes that resolve to the CSS var shadow values"
    - "motionTokens.ts exports typed spring presets (snappy, smooth, bouncy) and duration/easing constants"
    - "A written inventory documents all 1,256 primary-NNN hardcoded hex occurrences categorized by semantic usage"
    - "The dual color system (CSS var vs hardcoded hex) is explicitly documented with a forward migration strategy"
  artifacts:
    - path: "tailwind.config.js"
      provides: "shadow-0 through shadow-4 Tailwind utilities mapped to CSS vars"
      contains: "'0': 'var(--shadow-0)'"
    - path: "src/lib/motionTokens.ts"
      provides: "Named spring presets and duration/easing tokens for Framer Motion"
      exports: ["snappy", "smooth", "bouncy", "duration", "easing"]
    - path: ".planning/phases/16-token-foundation/COLOR-INVENTORY.md"
      provides: "Complete inventory of primary-NNN dual color system with migration strategy"
      contains: "ring-primary-500"
  key_links:
    - from: "tailwind.config.js boxShadow"
      to: "src/index.css :root --shadow-* vars"
      via: "var() CSS reference"
      pattern: "var\\(--shadow-[0-4]\\)"
    - from: "src/lib/motionTokens.ts"
      to: "framer-motion Transition type"
      via: "type import"
      pattern: "import type.*Transition.*framer-motion"
---

<objective>
Wire the shadow CSS vars to Tailwind utilities, create the TypeScript motion token module, and produce the dual color system inventory document.

Purpose: Complete the token foundation — Tailwind shadow utilities ready for use, motion presets importable by any component, and the silent primary-NNN dual color system explicitly documented so no downstream phase accidentally propagates inconsistency.

Output: Updated `tailwind.config.js`, new `src/lib/motionTokens.ts`, new `COLOR-INVENTORY.md` in phase directory.
</objective>

<execution_context>
@/home/yona279/.claude/get-shit-done/workflows/execute-plan.md
@/home/yona279/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/16-token-foundation/16-RESEARCH.md
@.planning/phases/16-token-foundation/16-01-SUMMARY.md
@tailwind.config.js
@src/lib/utils.ts
@tsconfig.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Wire shadow CSS vars to Tailwind boxShadow utilities and create motionTokens.ts</name>
  <files>tailwind.config.js, src/lib/motionTokens.ts</files>
  <action>
**Part A: Tailwind shadow mapping**

In `tailwind.config.js`, add 5 new entries to `theme.extend.boxShadow` AFTER the existing entries (`soft`, `card`, `card-hover`, `sidebar`, `header`). Add a blank line and comment before the new entries:

```javascript
// Semantic shadow scale (Phase 16 — TOKEN-03, maps to CSS vars in :root)
'0': 'var(--shadow-0)',
'1': 'var(--shadow-1)',
'2': 'var(--shadow-2)',
'3': 'var(--shadow-3)',
'4': 'var(--shadow-4)',
```

These produce `shadow-0` through `shadow-4` Tailwind utility classes. DO NOT remove or modify the existing named shadow entries.

**Part B: motionTokens.ts creation**

Create a new file `src/lib/motionTokens.ts` with the following content:

```typescript
import type { Transition } from "framer-motion";

/**
 * Motion token system for Tenuto.io v2.1
 *
 * Spring presets for Framer Motion transitions.
 * Usage: <motion.div transition={snappy} animate={{ opacity: 1 }} />
 *
 * Components are responsible for checking useReducedMotion()
 * when applying these presets. The CSS prefers-reduced-motion
 * media query in index.css handles CSS animations; these spring
 * presets handle JS-driven Framer Motion animations.
 */

/** Fast, decisive — buttons, toggles, small UI elements */
export const snappy: Transition = {
  type: "spring",
  stiffness: 400,
  damping: 30,
  mass: 0.8,
};

/** Natural, balanced — cards, panels, page sections */
export const smooth: Transition = {
  type: "spring",
  stiffness: 200,
  damping: 25,
  mass: 1,
};

/** Playful, attention-drawing — success states, badges, celebrations */
export const bouncy: Transition = {
  type: "spring",
  stiffness: 260,
  damping: 15,
  mass: 1,
};

/** Duration values in seconds for non-spring (ease) transitions */
export const duration = {
  instant: 0.05,
  fast: 0.15,     // page transitions (per v2.0 user decision)
  normal: 0.20,   // toasts, modals, slide panels (per v2.0 user decision)
  slow: 0.35,
} as const;

/** Named easing strings for CSS/Framer ease transitions */
export const easing = {
  easeOut: "ease-out",
  easeIn: "ease-in",
  easeInOut: "ease-in-out",
  sharp: "cubic-bezier(0.4, 0, 0.6, 1)",
} as const;
```

Verify the `@/` path alias works: `tsconfig.json` has `"@/*": ["./src/*"]`, so downstream imports will use `import { snappy } from "@/lib/motionTokens"`.

**IMPORTANT constraints:**
- The `Transition` type import MUST be `import type` (type-only) — no runtime dependency on framer-motion in this module
- Spring parameters are typed constants — they contain NO runtime logic
- Do NOT add `duration` or `easing` types from framer-motion — use `as const` assertions for literal types
  </action>
  <verify>
1. `grep -c "var(--shadow-" tailwind.config.js` returns 5
2. File `src/lib/motionTokens.ts` exists
3. `grep "export const snappy" src/lib/motionTokens.ts` returns a match
4. `grep "export const smooth" src/lib/motionTokens.ts` returns a match
5. `grep "export const bouncy" src/lib/motionTokens.ts` returns a match
6. `grep "export const duration" src/lib/motionTokens.ts` returns a match
7. `grep "export const easing" src/lib/motionTokens.ts` returns a match
8. `grep "import type.*Transition" src/lib/motionTokens.ts` returns a match (type-only import)
  </verify>
  <done>
`tailwind.config.js` generates `shadow-0` through `shadow-4` utilities that reference the CSS vars from plan 16-01. `src/lib/motionTokens.ts` exports 3 spring presets and 2 scalar token objects, all properly typed.
  </done>
</task>

<task type="auto">
  <name>Task 2: Produce dual color system inventory document</name>
  <files>.planning/phases/16-token-foundation/COLOR-INVENTORY.md</files>
  <action>
Create `.planning/phases/16-token-foundation/COLOR-INVENTORY.md` — a comprehensive inventory of the dual color system.

**Step 1: Gather data.** Run grep searches in the `src/` directory for all `primary-NNN` class usages (where NNN is 50, 100, 200, 300, 400, 500, 600, 700, 800, 900, 950). Count occurrences by class prefix pattern:
- `ring-primary-*` and `focus:ring-primary-*`
- `bg-primary-*` and `hover:bg-primary-*`
- `text-primary-*` and `hover:text-primary-*`
- `border-primary-*`
- `from-primary-*`, `to-primary-*`, `via-primary-*`
- `fill-primary-*`, `stroke-primary-*`

Also count the number of unique files affected.

**Step 2: Identify any components mixing both systems.** Search for files that contain BOTH `bg-primary` (bare — shadcn CSS var) AND `primary-500` (or other numbered variant — hardcoded hex). These are the highest-risk components where colors may visually conflict.

**Step 3: Write the inventory document.** Structure:

```markdown
# Dual Color System Inventory

**Created:** Phase 16 (Token Foundation)
**Status:** Documented — migration deferred to future phase

## The Conflict

[Explain: --primary CSS var = hsl(15 85% 45%) warm coral vs primary-500 hex = #4F46E5 indigo blue]
[Explain: bare `bg-primary` uses coral, `bg-primary-500` uses indigo]

## Occurrence Summary

| Category | Pattern | Count | Risk Level |
|----------|---------|-------|------------|
| Focus rings | ring-primary-*, focus:ring-primary-* | [count] | HIGH (accessibility) |
| Interactive brand | bg-primary-500/600/700, hover variants | [count] | MEDIUM |
| Text accent | text-primary-600/700 | [count] | LOW |
| Surface tint | bg-primary-50/100 | [count] | LOW |
| Border accent | border-primary-* | [count] | LOW |
| Gradient | from/to/via-primary-* | [count] | LOW |

**Total: [N] occurrences across [M] files**

## Mixed-System Components

[List any files using both bare `primary` AND numbered `primary-NNN`]

## Migration Strategy

Two approaches (decision deferred to a dedicated color phase):

**Option A: Align hardcoded palette to warm tones**
- Replace primary-500 (#4F46E5 indigo) with warm coral tones across the palette
- Pro: Consistent warm identity; Con: 131 files touched

**Option B: Introduce semantic color aliases**
- Create --color-brand, --color-focus, etc. that both systems share
- Pro: Incremental migration; Con: Adds indirection layer

## Risk Assessment

- ring-primary-500 (382 hits) is highest-risk: affects focus visibility (WCAG 2.1 AA requires 3:1 contrast)
- Any palette change must be browser-tested on all form fields
- Migration should happen per-page or per-component, not as a single big-bang
```

Use ACTUAL grep counts — do not use the research estimates without re-verifying. The research numbers (1,256 across 131 files) are approximations; produce accurate counts.
  </action>
  <verify>
1. File `.planning/phases/16-token-foundation/COLOR-INVENTORY.md` exists
2. The document contains actual grep-verified occurrence counts
3. The document identifies mixed-system components (if any)
4. The document describes both migration strategy options
5. The document notes the WCAG risk for ring-primary-500 migration
  </verify>
  <done>
A complete, grep-verified inventory of all primary-NNN hardcoded hex usages exists, categorized by semantic intent, with mixed-system components identified and a documented forward migration strategy. The dual color system inconsistency is no longer silent.
  </done>
</task>

</tasks>

<verification>
- `tailwind.config.js` has 5 new shadow entries mapping to CSS vars
- `src/lib/motionTokens.ts` exports snappy, smooth, bouncy, duration, easing
- `COLOR-INVENTORY.md` contains verified occurrence counts and migration strategy
- Existing Tailwind shadow entries (soft, card, card-hover, sidebar, header) are unchanged
- motionTokens uses `import type` (no runtime framer-motion dependency)
</verification>

<success_criteria>
1. `shadow-0` through `shadow-4` are valid Tailwind utility classes resolving to CSS vars
2. `motionTokens.ts` is importable via `@/lib/motionTokens` with proper TypeScript types
3. The COLOR-INVENTORY.md quantifies the full dual color system and documents a migration path
</success_criteria>

<output>
After completion, create `.planning/phases/16-token-foundation/16-02-SUMMARY.md`
</output>
