---
phase: 22-visual-architecture-rewrite
plan: 08
type: execute
wave: 2
depends_on: ["22-01"]
files_modified:
  - src/features/teachers/details/components/TeacherDetailsPage.tsx
  - src/features/teachers/details/components/TeacherTabNavigation.tsx
  - src/features/teachers/details/components/tabs/TeacherOverviewTab.tsx
  - src/features/teachers/details/components/tabs/PersonalInfoTab.tsx
  - src/features/teachers/details/components/tabs/ScheduleTab.tsx
  - src/features/teachers/details/components/tabs/StudentManagementTab.tsx
  - src/features/teachers/details/components/tabs/ConductingTab.tsx
  - src/features/teachers/details/components/tabs/HoursSummaryTab.tsx
  - src/features/orchestras/details/components/OrchestraDetailsPage.tsx
  - src/features/orchestras/details/components/tabs/PersonalInfoTab.tsx
  - src/features/orchestras/details/components/tabs/MembersTab.tsx
  - src/features/orchestras/details/components/tabs/ScheduleTab.tsx
  - src/features/students/details/components/StudentDetailsPage.tsx
  - src/features/students/details/components/StudentDetailsPageOptimized.tsx
  - src/features/students/details/components/StudentDetailsPageSimple.tsx
  - src/features/students/details/components/StudentTabNavigation.tsx
  - src/features/students/details/components/StudentTabContent.tsx
  - src/features/students/details/components/StudentDetailsHeader.tsx
  - src/features/students/details/components/tabs/PersonalInfoTab.tsx
  - src/features/students/details/components/tabs/PersonalInfoTabSimple.tsx
  - src/features/students/details/components/tabs/AcademicInfoTab.tsx
  - src/features/students/details/components/tabs/AcademicInfoTabSimple.tsx
  - src/features/students/details/components/tabs/BagrutTab.tsx
  - src/features/students/details/components/tabs/AttendanceTab.tsx
  - src/features/students/details/components/tabs/OrchestraTab.tsx
  - src/features/students/details/components/tabs/TheoryTab.tsx
  - src/features/students/details/components/tabs/TheoryTabOptimized.tsx
  - src/features/students/details/components/tabs/DocumentsTab.tsx
  - src/features/students/details/components/tabs/ScheduleTab.tsx
  - src/features/students/details/components/QuickActionsModal.tsx
  - src/features/students/details/components/DeletionImpactSummary.tsx
  - src/features/students/details/components/EnrollmentManager.tsx
  - src/features/students/details/components/AuditTrailPanel.tsx
  - src/features/students/details/components/StudentDetailsErrorBoundary.tsx
  - src/features/students/details/components/modals/StageAdvancementConfirmModal.tsx
autonomous: true

must_haves:
  truths:
    - "No bg-primary-NNN hardcoded classes remain in any feature detail component"
    - "No rounded-xl/2xl/3xl in feature detail components — rounded-full preserved"
    - "Tab navigation components use sharp radius"
  artifacts:
    - path: "src/features/teachers/details/components/TeacherDetailsPage.tsx"
      provides: "Detail page with semantic tokens"
    - path: "src/features/students/details/components/StudentDetailsPage.tsx"
      provides: "Detail page with semantic tokens"
  key_links:
    - from: "src/features/*/details/components/*.tsx"
      to: "src/index.css"
      via: "Semantic token classes"
      pattern: "bg-primary[^-]|bg-muted|border-border"
---

<objective>
Sweep all feature detail components (teacher, student, orchestra details pages and their tabs) for hardcoded primary-NNN colors and excessive rounding. These are the most complex page structures in the app — 35 files with deep nesting.

Purpose: Feature detail pages are the dossier archetype. Before restructuring their layout (Plan 10), the hardcoded styles must be cleaned so the token system flows through. The teacher, student, and orchestra detail pages collectively account for the majority of user interaction time.

Output: 35 feature detail component files cleaned
</objective>

<execution_context>
@/home/yona279/.claude/get-shit-done/workflows/execute-plan.md
@/home/yona279/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/22-visual-architecture-rewrite/22-RESEARCH.md
@.planning/phases/22-visual-architecture-rewrite/22-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Clean teacher and orchestra detail components</name>
  <files>src/features/teachers/details/components/TeacherDetailsPage.tsx, src/features/teachers/details/components/TeacherTabNavigation.tsx, src/features/teachers/details/components/tabs/TeacherOverviewTab.tsx, src/features/teachers/details/components/tabs/PersonalInfoTab.tsx, src/features/teachers/details/components/tabs/ScheduleTab.tsx, src/features/teachers/details/components/tabs/StudentManagementTab.tsx, src/features/teachers/details/components/tabs/ConductingTab.tsx, src/features/teachers/details/components/tabs/HoursSummaryTab.tsx, src/features/orchestras/details/components/OrchestraDetailsPage.tsx, src/features/orchestras/details/components/tabs/PersonalInfoTab.tsx, src/features/orchestras/details/components/tabs/MembersTab.tsx, src/features/orchestras/details/components/tabs/ScheduleTab.tsx</files>
  <action>
Apply standard replacement rules:

**Color:** bg-primary-NNN → semantic tokens. Same mapping as Plan 03.
**Rounding:** rounded-xl/2xl/3xl/lg → rounded. Preserve rounded-full.

**TeacherTabNavigation.tsx specific:** Has 3 bg-primary-NNN instances — likely active tab indicator. Replace with `bg-primary` (black) or entity-specific `bg-teachers-fg` for the active tab pill.

**TeacherDetailsPage.tsx specific:** Has 3 bg-primary-NNN instances. Replace. Entity-colored header will be restructured in Plan 10 — for now, just clean hardcoded colors.

**HoursSummaryTab.tsx specific:** Has 3 bg-primary-NNN instances — likely summary stat styling. Replace with semantic tokens.

**Tab content within teacher/orchestra details:** Tables inside tabs should follow flat surface rules (no shadow, no rounded container). Apply same cleanup.
  </action>
  <verify>Run `grep -rn "bg-primary-[0-9]\|text-primary-[0-9]\|rounded-xl\|rounded-2xl" src/features/teachers/ src/features/orchestras/` — must return ZERO.</verify>
  <done>All teacher and orchestra detail components clean of hardcoded styles.</done>
</task>

<task type="auto">
  <name>Task 2: Clean student detail components</name>
  <files>src/features/students/details/components/StudentDetailsPage.tsx, src/features/students/details/components/StudentDetailsPageOptimized.tsx, src/features/students/details/components/StudentDetailsPageSimple.tsx, src/features/students/details/components/StudentTabNavigation.tsx, src/features/students/details/components/StudentTabContent.tsx, src/features/students/details/components/StudentDetailsHeader.tsx, src/features/students/details/components/tabs/PersonalInfoTab.tsx, src/features/students/details/components/tabs/PersonalInfoTabSimple.tsx, src/features/students/details/components/tabs/AcademicInfoTab.tsx, src/features/students/details/components/tabs/AcademicInfoTabSimple.tsx, src/features/students/details/components/tabs/BagrutTab.tsx, src/features/students/details/components/tabs/AttendanceTab.tsx, src/features/students/details/components/tabs/OrchestraTab.tsx, src/features/students/details/components/tabs/TheoryTab.tsx, src/features/students/details/components/tabs/TheoryTabOptimized.tsx, src/features/students/details/components/tabs/DocumentsTab.tsx, src/features/students/details/components/tabs/ScheduleTab.tsx, src/features/students/details/components/QuickActionsModal.tsx, src/features/students/details/components/DeletionImpactSummary.tsx, src/features/students/details/components/EnrollmentManager.tsx, src/features/students/details/components/AuditTrailPanel.tsx, src/features/students/details/components/StudentDetailsErrorBoundary.tsx, src/features/students/details/components/modals/StageAdvancementConfirmModal.tsx</files>
  <action>
Apply standard replacement rules to all student detail components:

**Color:** bg-primary-NNN → semantic tokens. Same mapping.
**Rounding:** rounded-xl/2xl/3xl/lg → rounded. Preserve rounded-full.

**StudentDetailsPage.tsx specific:** Has 3 bg-primary-NNN instances. Replace.
**StudentDetailsPageOptimized.tsx:** Has 3 bg-primary-NNN instances. Replace.
**StudentTabNavigation.tsx:** Has 3 bg-primary-NNN for active tab indicator. Replace.
**QuickActionsModal.tsx:** Has 9 bg-primary-NNN instances — modal buttons and action items. Replace all with semantic tokens. Keep Card wrapper (it's a modal).
**DocumentsTab.tsx:** Has 5 bg-primary-NNN instances. Replace.
**AcademicInfoTab.tsx:** Has 5 bg-primary-NNN instances. Replace.
**AcademicInfoTabSimple.tsx:** Has 4 bg-primary-NNN instances. Replace.

**Modal components (QuickActionsModal, StageAdvancementConfirmModal):** KEEP Card wrappers — floating content. Only replace color classes.
  </action>
  <verify>Run `grep -rn "bg-primary-[0-9]\|text-primary-[0-9]\|rounded-xl\|rounded-2xl" src/features/students/` — must return ZERO.</verify>
  <done>All student detail components clean of hardcoded styles. Modal Card wrappers preserved.</done>
</task>

</tasks>

<verification>
1. `grep -rn "bg-primary-[0-9]" src/features/` returns zero
2. `grep -rn "text-primary-[0-9]" src/features/` returns zero
3. `grep -rn "rounded-xl\|rounded-2xl" src/features/` returns zero
</verification>

<success_criteria>
- Zero hardcoded primary-NNN in all 35 feature detail components
- Zero excessive rounding in feature detail components
- Modal Card wrappers preserved
- Tab navigation uses semantic tokens
</success_criteria>

<output>
After completion, create `.planning/phases/22-visual-architecture-rewrite/22-08-SUMMARY.md`
</output>
