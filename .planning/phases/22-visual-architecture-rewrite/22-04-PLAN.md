---
phase: 22-visual-architecture-rewrite
plan: 04
type: execute
wave: 2
depends_on: ["22-01"]
files_modified:
  - src/components/ui/StatsCard.tsx
  - src/components/domain/StatsCard.tsx
  - src/components/ui/Table.tsx
  - src/components/ui/SearchInput.tsx
  - src/components/ui/Pagination.tsx
  - src/components/ui/ListPageHero.tsx
  - src/components/domain/DetailPageHeader.tsx
  - src/components/ui/InputModal.tsx
  - src/components/ui/ConfirmDeleteModal.tsx
  - src/components/ui/ConfirmationModal.tsx
  - src/components/ui/Calendar.tsx
  - src/components/ui/DesignSystem.tsx
  - src/components/ui/ValidationIndicator.tsx
  - src/components/Header.tsx
  - src/components/SchoolYearSelector.tsx
autonomous: true

must_haves:
  truths:
    - "No bg-primary-NNN hardcoded classes remain in shared UI components"
    - "No rounded-xl/2xl/3xl remains in shared UI components — rounded-full preserved"
    - "Table.tsx has no decorative shadow or rounded corners on its container"
    - "StatsCard no longer uses vivid pastel backgrounds — subdued entity colors only"
  artifacts:
    - path: "src/components/ui/Table.tsx"
      provides: "Flat data surface table — no shadow, no rounded container"
    - path: "src/components/ui/StatsCard.tsx"
      provides: "Stats card with subdued entity colors"
    - path: "src/components/domain/DetailPageHeader.tsx"
      provides: "Header with subdued entity colors, no vivid pastels"
  key_links:
    - from: "src/components/ui/Table.tsx"
      to: "src/index.css"
      via: "Removed shadow and rounding classes"
      pattern: "rounded-none|shadow-none"
---

<objective>
Sweep all shared UI and domain components for hardcoded primary-NNN colors, excessive rounding, and decorative shadows. Special attention to Table.tsx (must become flat data surface), StatsCard (subdued colors), and DetailPageHeader (subdued entity pastels).

Purpose: The token reset flows through CSS vars but shared components have hardcoded classes that bypass the system. These components are imported by dozens of page files — cleaning them has multiplicative impact.

Output: 15+ shared components cleaned of hardcoded styles
</objective>

<execution_context>
@/home/yona279/.claude/get-shit-done/workflows/execute-plan.md
@/home/yona279/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/22-visual-architecture-rewrite/22-RESEARCH.md
@.planning/phases/22-visual-architecture-rewrite/22-01-SUMMARY.md
@src/components/ui/Table.tsx
@src/components/ui/StatsCard.tsx
@src/components/domain/DetailPageHeader.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Clean shared UI components — primary-NNN colors and rounding</name>
  <files>src/components/ui/StatsCard.tsx, src/components/domain/StatsCard.tsx, src/components/ui/Table.tsx, src/components/ui/SearchInput.tsx, src/components/ui/Pagination.tsx, src/components/ui/InputModal.tsx, src/components/ui/ConfirmDeleteModal.tsx, src/components/ui/ConfirmationModal.tsx, src/components/ui/Calendar.tsx, src/components/ui/DesignSystem.tsx, src/components/ui/ValidationIndicator.tsx, src/components/Header.tsx, src/components/SchoolYearSelector.tsx</files>
  <action>
Apply the same replacement rules as Plan 03 Task 1 and Task 2 to all shared UI components:

**Color replacements:** bg-primary-NNN → bg-primary/bg-black/bg-muted (context-dependent). Same mapping as Plan 03.

**Rounding replacements:** rounded-xl/2xl/3xl/lg → rounded. Preserve rounded-full.

**Table.tsx specific changes:**
- Remove any shadow class on the table container (shadow-sm, shadow-1, etc.)
- Remove rounded-lg or rounded-xl from the table wrapper — table should be flat: `rounded-none` or just remove the rounded class
- Ensure row hover is strong: if there's a `hover:bg-*` on rows, verify it's a bold shift like `hover:bg-muted` (not a subtle transparency change)
- Row dividers should be hairline: `divide-y divide-border` or `border-b border-border` on rows

**StatsCard.tsx specific changes:**
- If StatsCard has `coloredBg` variants using vivid entity pastel backgrounds, reduce the saturation. The entity colors in CSS vars are already subdued per Plan 01, but if StatsCard adds extra opacity or hardcodes `bg-teachers-bg` with vivid backgrounds, ensure it uses the token system
- Remove shadow-1/shadow-2 from stat cards — flat surfaces per archetype rules

**DetailPageHeader.tsx specific changes:**
- Subdued entity colors — the header should use thin accent (e.g., left border in entity color) not full pastel background
- Reduce prominence of the entity-colored background: instead of `bg-teachers-bg` (even subdued), use `bg-muted/40` with a thin left accent line in entity color
- This is preparation for the full detail page archetype in Plan 07 — for now, just clean the hardcoded classes

**Header.tsx and SchoolYearSelector.tsx:**
- Replace any hardcoded primary/gray colors with semantic tokens
- Ensure the header is minimal per archetype rules: page identity + breadcrumb only
  </action>
  <verify>Run `grep -rn "bg-primary-[0-9]\|text-primary-[0-9]\|rounded-xl\|rounded-2xl" src/components/ui/ src/components/domain/DetailPageHeader.tsx src/components/Header.tsx src/components/SchoolYearSelector.tsx` — must return ZERO results (excluding rounded-full).</verify>
  <done>All shared UI/domain components clean of hardcoded primary-NNN and excessive rounding. Table is flat. StatsCard uses subdued colors. DetailPageHeader uses subdued entity accents.</done>
</task>

<task type="auto">
  <name>Task 2: Clean ListPageHero.tsx for subdued entity colors</name>
  <files>src/components/ui/ListPageHero.tsx</files>
  <action>
ListPageHero.tsx will be ELIMINATED in Plan 06 (list page archetypes), but for now clean its hardcoded classes so intermediate renders don't clash with the new token system:

- Replace any `bg-primary-NNN` with semantic tokens
- Replace `rounded-xl` / `rounded-lg` with `rounded`
- Reduce entity background prominence — use subdued entity-bg tokens
- Keep the component functional (it will be removed later)

This is a transitional cleanup. The goal is: after Plans 01-04, the entire app renders consistently with the new cool neutral palette even before archetype restructuring.
  </action>
  <verify>Grep for `bg-primary-[0-9]` and `rounded-xl` in ListPageHero.tsx — zero results.</verify>
  <done>ListPageHero.tsx uses semantic tokens and subdued colors. Ready for elimination in Plan 06.</done>
</task>

</tasks>

<verification>
1. `grep -rn "bg-primary-[0-9]" src/components/ui/ src/components/domain/DetailPageHeader.tsx src/components/Header.tsx` returns zero
2. `grep -rn "rounded-xl\|rounded-2xl" src/components/ui/ src/components/domain/` returns zero
3. Table.tsx has no shadow on container (grep for `shadow` in Table.tsx — should be `shadow-none` or absent)
4. StatsCard.tsx has no shadow-1/shadow-2
</verification>

<success_criteria>
- Zero hardcoded primary-NNN in all shared UI components
- Zero excessive rounding in shared UI components
- Table.tsx is a flat data surface (no shadow, no rounded container)
- StatsCard uses subdued entity colors
- DetailPageHeader uses thin accent, not vivid pastel background
</success_criteria>

<output>
After completion, create `.planning/phases/22-visual-architecture-rewrite/22-04-SUMMARY.md`
</output>
