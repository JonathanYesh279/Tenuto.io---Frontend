---
phase: 22-visual-architecture-rewrite
plan: 12
type: execute
wave: 3
depends_on: ["22-02", "22-06"]
files_modified:
  - src/pages/Dashboard.tsx
  - src/components/dashboard/MainDashboard.tsx
  - src/components/dashboard/RealDataDashboard.tsx
autonomous: true

must_haves:
  truths:
    - "Dashboard has one dominant zone — a primary metric area that is 3-4x larger than secondary elements"
    - "Dashboard layout is asymmetric — no equal-width card grid"
    - "Dashboard stat cards are NOT a symmetric grid — primary metric is visually dominant"
    - "Tab bar is removed or converted to secondary navigation/scroll sections"
    - "Operational panels below dominant zone use unequal column weights"
  artifacts:
    - path: "src/pages/Dashboard.tsx"
      provides: "Dashboard page following command center archetype"
    - path: "src/components/dashboard/MainDashboard.tsx"
      provides: "Main dashboard with asymmetric layout, dominant zone"
  key_links:
    - from: "src/pages/Dashboard.tsx"
      to: "src/components/dashboard/MainDashboard.tsx"
      via: "Dashboard renders MainDashboard with new layout"
      pattern: "MainDashboard|RealDataDashboard"
---

<objective>
Implement the Dashboard (Command Center) archetype. Replace the symmetric tab + stat card grid with an asymmetric layout featuring one dominant metric zone, unequal operational panels, and tertiary contextual sections.

Purpose: The dashboard is the first page every admin sees. The current equal-weight stat card grid and tab system reads as "admin template." The command center archetype makes one thing unmissable — the key operational metric — with everything else subordinate.

Output: Dashboard restructured with asymmetric command center layout
</objective>

<execution_context>
@/home/yona279/.claude/get-shit-done/workflows/execute-plan.md
@/home/yona279/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ARCHETYPES.md
@.planning/phases/22-visual-architecture-rewrite/22-RESEARCH.md
@.planning/phases/22-visual-architecture-rewrite/22-06-SUMMARY.md
@src/pages/Dashboard.tsx
@src/components/dashboard/MainDashboard.tsx
@src/components/dashboard/RealDataDashboard.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Restructure MainDashboard/RealDataDashboard with command center archetype</name>
  <files>src/pages/Dashboard.tsx, src/components/dashboard/MainDashboard.tsx, src/components/dashboard/RealDataDashboard.tsx</files>
  <action>
Restructure the dashboard layout from symmetric grid to asymmetric command center.

**Step 1: Remove or convert the top-level tab system.**
The current dashboard has tabs (Overview, Students, Schedule, Bagrut, Hours). Convert this:
- The "Overview" content becomes the main command center view (always visible)
- If tabs are used for sub-views (Students, Schedule, Bagrut, Hours), convert them to a secondary compact nav or remove them. The main dashboard should NOT start with a prominent tab bar. If secondary views are needed, use a small segmented control or link buttons below the main content, NOT a full-width tab bar.

**Step 2: Create dominant zone — primary metric area.**
Replace the equal-weight stat card grid with an asymmetric dominant zone:

```tsx
{/* DOMINANT ZONE — primary metric, visually 3-4x larger than anything else */}
<div className="grid grid-cols-[2fr_1fr] gap-6 mb-6">
  {/* Left: PRIMARY metric — the ONE number that matters most */}
  <div className="py-8">
    <span className="text-xs uppercase tracking-wider text-muted-foreground font-medium">תלמידים פעילים</span>
    <div className="text-6xl font-bold text-foreground mt-1">{activeStudents}</div>
    <span className="text-sm text-muted-foreground mt-2 block">מתוך {totalStudents} רשומים</span>
  </div>

  {/* Right: SECONDARY metrics — stacked, smaller */}
  <div className="flex flex-col gap-4 py-8">
    <div>
      <span className="text-xs text-muted-foreground">מורים פעילים</span>
      <div className="text-2xl font-semibold text-foreground">{activeTeachers}</div>
    </div>
    <div>
      <span className="text-xs text-muted-foreground">תזמורות</span>
      <div className="text-2xl font-semibold text-foreground">{orchestraCount}</div>
    </div>
    <div>
      <span className="text-xs text-muted-foreground">שיעורים היום</span>
      <div className="text-2xl font-semibold text-foreground">{todayLessons}</div>
    </div>
  </div>
</div>
```

RTL note: In RTL, `grid-cols-[2fr_1fr]` renders the 2fr column on the RIGHT (start) and 1fr on the LEFT. This is correct — the dominant zone is on the reading-start side.

**Step 3: Create operational panels — unequal columns.**
Below the dominant zone, add operational panels with asymmetric weights:

```tsx
{/* OPERATIONAL PANELS — 3:2 split */}
<div className="grid grid-cols-[3fr_2fr] gap-6 mb-6">
  {/* Left (RTL: right): DailyTeacherRoomTable — primary operational data */}
  <div>
    <h2 className="text-sm font-semibold text-foreground mb-3 uppercase tracking-wide">מערכת יומית</h2>
    <DailyTeacherRoomTable />
  </div>

  {/* Right (RTL: left): Contextual widgets — upcoming, activity */}
  <div className="space-y-6">
    <div>
      <h2 className="text-sm font-semibold text-foreground mb-3 uppercase tracking-wide">אירועים קרובים</h2>
      <UpcomingEventsWidget />
    </div>
    <div>
      <h2 className="text-sm font-semibold text-foreground mb-3 uppercase tracking-wide">פעילות אחרונה</h2>
      <RecentActivityWidget />
    </div>
  </div>
</div>
```

**Step 4: Position charts as tertiary content.**
Charts (if present) go at the bottom with lower visual weight:
```tsx
{/* CONTEXTUAL — charts at bottom, tertiary weight */}
<div className="grid grid-cols-2 gap-6 mt-6">
  {charts}
</div>
```

**Step 5: No Card wrappers.**
Remove Card wrappers from all dashboard sections. Section identity comes from heading + spacing.

**Step 6: No StatsCard grid.**
The current 2x3 StatsCard grid is replaced by the dominant zone layout above. StatsCard components are NOT used in the main command center view.

Preserve all existing data fetching, API calls, and conditional rendering logic. Only restructure the layout and visual hierarchy. If the dashboard has role-based rendering (admin vs teacher vs conductor), apply the command center pattern to the admin view. Teacher/conductor dashboards (TeacherDashboard, ConductorDashboard) can keep simpler layouts for now.
  </action>
  <verify>
1. MainDashboard or RealDataDashboard has `grid-cols-[2fr_1fr]` for dominant zone
2. No equal-width stat card grid (`grid-cols-2 md:grid-cols-3` pattern is gone)
3. `text-6xl` or similar display-scale metric exists for the primary number
4. No Card wrapper around dashboard sections
  </verify>
  <done>Dashboard follows command center archetype. Asymmetric dominant zone with one primary metric at display scale. Unequal operational panels. Charts at tertiary position. No equal-weight stat card grid. No prominent tab bar.</done>
</task>

</tasks>

<verification>
1. Dashboard has `grid-cols-[2fr_1fr]` or similar asymmetric split for primary zone
2. One metric rendered at display scale (text-5xl or text-6xl)
3. No symmetric stat card grid
4. No Card wrappers on page sections
5. Tab bar removed or converted to secondary nav
</verification>

<success_criteria>
- Dashboard has exactly one dominant zone (primary metric) that is 3-4x larger than other elements
- Layout is asymmetric — no equal-width columns for the primary grid
- Equal stat card grid eliminated
- Tab system removed or converted to secondary navigation
- Operational panels use unequal column weights
- No Card wrappers on page sections
- Data fetching and role-based rendering preserved
</success_criteria>

<output>
After completion, create `.planning/phases/22-visual-architecture-rewrite/22-12-SUMMARY.md`
</output>
