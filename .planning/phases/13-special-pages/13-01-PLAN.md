---
phase: 13-special-pages
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/pages/Login.tsx
  - src/pages/ForgotPassword.tsx
  - src/pages/ResetPassword.tsx
  - src/pages/Settings.tsx
  - src/pages/AuditTrail.tsx
autonomous: true

must_haves:
  truths:
    - "The Login page shows a music note icon and Hebrew conservatory tagline above the form"
    - "The Login CTA button uses warm coral (bg-primary) instead of blue"
    - "ForgotPassword and ResetPassword CTA buttons also use warm coral instead of blue"
    - "All three auth pages' input focus rings use warm token (focus:ring-ring) instead of blue"
    - "Settings form inputs use shadcn Input component with automatic warm focus ring"
    - "Settings native <select> elements keep native but use focus:ring-ring token"
    - "AuditTrail active tab uses border-primary text-primary instead of blue"
    - "AuditTrail filter inputs and selects use focus:ring-ring instead of blue"
    - "The Settings page uses consistent card/form patterns matching the design system"
  artifacts:
    - path: "src/pages/Login.tsx"
      provides: "Warm-branded login page with music identity"
      contains: "Music"
    - path: "src/pages/ForgotPassword.tsx"
      provides: "Warm-branded forgot password page"
      contains: "bg-primary"
    - path: "src/pages/ResetPassword.tsx"
      provides: "Warm-branded reset password page"
      contains: "bg-primary"
    - path: "src/pages/Settings.tsx"
      provides: "Settings page with shadcn Input components"
      contains: "from '../components/ui/input'"
    - path: "src/pages/AuditTrail.tsx"
      provides: "AuditTrail with warm primary tab tokens"
      contains: "border-primary text-primary"
  key_links:
    - from: "src/pages/Login.tsx"
      to: "lucide-react"
      via: "Music icon import"
      pattern: "import.*Music.*from 'lucide-react'"
    - from: "src/pages/Settings.tsx"
      to: "src/components/ui/input.tsx"
      via: "shadcn Input import"
      pattern: "import.*Input.*from.*components/ui/input"
---

<objective>
Apply warm design tokens and music identity to auth pages (Login, ForgotPassword, ResetPassword), Settings, and AuditTrail.

Purpose: These pages still use hardcoded `bg-blue-600`, `focus:ring-blue-500`, and `border-blue-500` tokens from the pre-Phase-6 era. This plan brings them into the warm coral design system, adds music identity branding to Login, migrates Settings inputs to shadcn Input, and swaps AuditTrail tab/filter tokens.

Output: 5 updated page files with consistent warm design tokens.
</objective>

<execution_context>
@/home/yona279/.claude/get-shit-done/workflows/execute-plan.md
@/home/yona279/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/13-special-pages/13-RESEARCH.md
@src/pages/Login.tsx
@src/pages/ForgotPassword.tsx
@src/pages/ResetPassword.tsx
@src/pages/Settings.tsx
@src/pages/AuditTrail.tsx
@src/components/ui/input.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Auth pages — warm branding and token migration</name>
  <files>
    src/pages/Login.tsx
    src/pages/ForgotPassword.tsx
    src/pages/ResetPassword.tsx
  </files>
  <action>
**Login.tsx — Music identity + token swap:**

1. Add `Music` to the existing lucide-react import (Music is already imported in MinistryReports but not Login — add it).

2. In the Login form view (the `<>` block after `{/* Login Form View */}`), ABOVE the existing `<h2>` heading, add a music identity block:
```tsx
<div className="flex flex-col items-center gap-2 mb-4">
  <div className="w-16 h-16 rounded-full bg-primary/20 border border-primary/30 flex items-center justify-center">
    <Music className="w-8 h-8 text-white" />
  </div>
  <p className="text-sm text-white/70 font-reisinger-yonatan">מערכת ניהול קונסרבטוריון</p>
</div>
```
Note: No dynamic school name — auth context is not available pre-login.

3. On the Login CTA submit button, replace:
   - `bg-blue-600/90 hover:bg-blue-700/90` → `bg-primary/90 hover:bg-primary`
   - `focus:ring-blue-500` → `focus:ring-ring`

4. On both `<input>` elements (email and password), replace:
   - `focus:ring-blue-500` → `focus:ring-ring`

5. In the tenant selector view, on the tenant button:
   - `focus:ring-blue-400` → `focus:ring-ring`
   - `bg-blue-500/30` (the Building2 icon container) → `bg-primary/30`

**ForgotPassword.tsx — token swap only:**

1. On the `<input>` element, replace `focus:ring-blue-500` → `focus:ring-ring`
2. On the CTA submit button, replace:
   - `bg-blue-600/90 hover:bg-blue-700/90` → `bg-primary/90 hover:bg-primary`
   - `focus:ring-blue-500` → `focus:ring-ring`
3. Add the same music identity block above the `<h2>` heading (icon + tagline), matching Login. Import `Music` from lucide-react.

**ResetPassword.tsx — token swap only:**

1. On both `<input>` elements, replace `focus:ring-blue-500` → `focus:ring-ring`
2. On the CTA submit button, replace:
   - `bg-blue-600/90 hover:bg-blue-700/90` → `bg-primary/90 hover:bg-primary`
   - `focus:ring-blue-500` → `focus:ring-ring`
3. Add the same music identity block above the `<h2>` heading (icon + tagline), matching Login. Import `Music` from lucide-react.

**CRITICAL TOKEN TRAP:** Use `bg-primary` (CSS var = warm coral), NOT `bg-primary-600` (hardcoded blue hex). Same for ring: `focus:ring-ring` (CSS var), NOT `focus:ring-primary-500`.
  </action>
  <verify>
Run: `grep -n "bg-blue-600\|ring-blue-500\|ring-blue-400\|bg-blue-500" src/pages/Login.tsx src/pages/ForgotPassword.tsx src/pages/ResetPassword.tsx`
Expected: zero matches. All blue tokens replaced.

Run: `grep -n "Music" src/pages/Login.tsx src/pages/ForgotPassword.tsx src/pages/ResetPassword.tsx`
Expected: Music icon imported and used in all three files.
  </verify>
  <done>All three auth pages use bg-primary/90 for CTA buttons, focus:ring-ring for input/button focus, and show a Music icon with Hebrew tagline. Zero `bg-blue-600` or `focus:ring-blue-500` remains.</done>
</task>

<task type="auto">
  <name>Task 2: Settings shadcn Input migration + AuditTrail token swap</name>
  <files>
    src/pages/Settings.tsx
    src/pages/AuditTrail.tsx
  </files>
  <action>
**Settings.tsx — shadcn Input migration:**

1. Add import: `import { Input } from '../components/ui/input'`

2. Replace all 4 `<input type="text">` elements (name, city, director name, institution code, district name) with the shadcn `<Input>` component:
   - Remove the manual className with `focus:ring-2 focus:ring-primary-500 focus:border-transparent`
   - shadcn Input automatically uses `ring-ring` (warm coral CSS var)
   - Keep `value`, `onChange`, `placeholder`, `type` props as-is
   - Add `className="text-right"` for RTL text alignment
   - Example replacement:
     ```tsx
     // Before:
     <input type="text" value={formData.name} onChange={...}
       className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-right"
       placeholder="..." />
     // After:
     <Input type="text" value={formData.name} onChange={...}
       className="text-right" placeholder="..." />
     ```

3. For the 2 native `<select>` elements (director teacher select, school start month select) — do NOT replace with Radix Select (per Phase 9 decision: native select kept on admin pages with simple options). Only fix the focus ring class:
   - `focus:ring-2 focus:ring-primary-500 focus:border-transparent` → `focus:ring-2 focus:ring-ring focus:border-transparent`

4. For the duration checkboxes — they are `<input type="checkbox">` — leave as native checkboxes. Fix:
   - `text-primary-600` → `text-primary` (on checkbox)
   - `focus:ring-primary-500` → `focus:ring-ring`

5. For the page header icon container: `bg-primary-100` → keep as-is (palette bg-primary-100 is a light tint, acceptable here), and `text-primary-600` → `text-primary`.

6. For the Save button: `bg-primary-600` → `bg-primary`, `hover:bg-primary-700` → `hover:bg-primary/90`.

7. For the loading spinner: `border-primary-600` → `border-primary`.

**AuditTrail.tsx — token swaps:**

1. Page header icon: `text-blue-600` on Shield icon → `text-primary`

2. Tab buttons (two of them, deletion-log and past-activities): Replace active state classes:
   - `border-blue-500 text-blue-600` → `border-primary text-primary`

3. Filter inputs (2 date inputs and 2 selects across both tabs): Replace:
   - `focus:ring-blue-500 focus:border-blue-500` → `focus:ring-ring focus:border-ring`
   Note: there are 4 filter elements total (startDate input, endDate input, entityType select, activityType select).

**CRITICAL:** Do NOT replace informational blue colors (like bg-blue-50 border-blue-200 on info banners). Only replace interactive element tokens (buttons, tabs, focus rings).
  </action>
  <verify>
Run: `grep -n "ring-primary-500\|bg-primary-600\|bg-primary-700\|text-primary-600" src/pages/Settings.tsx`
Expected: zero matches (all migrated to CSS var tokens).

Run: `grep -n "blue-500\|blue-600\|blue-700" src/pages/AuditTrail.tsx`
Expected: zero matches (all blue interactive tokens replaced with primary).

Run: `grep -n "from.*components/ui/input" src/pages/Settings.tsx`
Expected: one match (shadcn Input import present).
  </verify>
  <done>Settings uses shadcn Input for text fields, focus:ring-ring for selects/checkboxes, bg-primary for buttons. AuditTrail uses border-primary text-primary for active tabs and focus:ring-ring for filter inputs/selects. No blue interactive tokens remain in either file.</done>
</task>

</tasks>

<verification>
1. `grep -rn "bg-blue-600\|ring-blue-500\|border-blue-500\|text-blue-600" src/pages/Login.tsx src/pages/ForgotPassword.tsx src/pages/ResetPassword.tsx src/pages/Settings.tsx src/pages/AuditTrail.tsx` — zero matches
2. `grep -rn "bg-primary-600\|ring-primary-500\|text-primary-600" src/pages/Settings.tsx` — zero matches (Settings fully migrated to CSS var tokens)
3. `grep -n "Music" src/pages/Login.tsx` — Music icon import present
4. `grep -n "Input" src/pages/Settings.tsx` — shadcn Input import present
5. App builds without errors: `npx tsc --noEmit` (may have pre-existing unrelated TS errors — focus on no NEW errors in these 5 files)
</verification>

<success_criteria>
- Login/ForgotPassword/ResetPassword: warm coral CTA buttons, warm focus rings, music identity icon + tagline
- Settings: shadcn Input for text fields, warm focus rings for selects/checkboxes, warm primary button
- AuditTrail: warm primary active tabs, warm focus rings for filter inputs
- Zero `bg-blue-600`, `focus:ring-blue-500`, `border-blue-500 text-blue-600` in any of the 5 files
</success_criteria>

<output>
After completion, create `.planning/phases/13-special-pages/13-01-SUMMARY.md`
</output>
