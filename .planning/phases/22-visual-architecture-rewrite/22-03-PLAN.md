---
phase: 22-visual-architecture-rewrite
plan: 03
type: execute
wave: 2
depends_on: ["22-01"]
files_modified:
  - src/pages/Teachers.tsx
  - src/pages/Students.tsx
  - src/pages/Orchestras.tsx
  - src/pages/Dashboard.tsx
  - src/pages/Bagruts.tsx
  - src/pages/Rehearsals.tsx
  - src/pages/TheoryLessons.tsx
  - src/pages/TheoryLessonDetails.tsx
  - src/pages/BagrutDetails.tsx
  - src/pages/RehearsalDetails.tsx
  - src/pages/Settings.tsx
  - src/pages/ImportData.tsx
  - src/pages/MinistryReports.tsx
  - src/pages/AuditTrail.tsx
  - src/pages/Profile.tsx
autonomous: true

must_haves:
  truths:
    - "No bg-primary-NNN hardcoded color classes remain in any page file under src/pages/"
    - "All replaced classes use semantic tokens (bg-primary, bg-black, bg-neutral-900, or entity-color tokens)"
    - "rounded-xl, rounded-lg, rounded-2xl are replaced with rounded or removed — rounded-full preserved for avatars"
  artifacts:
    - path: "src/pages/Teachers.tsx"
      provides: "Page with no hardcoded primary-NNN classes"
    - path: "src/pages/Students.tsx"
      provides: "Page with no hardcoded primary-NNN classes"
    - path: "src/pages/Dashboard.tsx"
      provides: "Page with no hardcoded primary-NNN classes"
  key_links:
    - from: "src/pages/*.tsx"
      to: "src/index.css"
      via: "Semantic token classes (bg-primary, bg-black) reading CSS vars"
      pattern: "bg-primary[^-]|bg-black|bg-neutral"
---

<objective>
Mechanical sweep of all page files — replace hardcoded `bg-primary-500`, `bg-primary-600`, `text-primary-500` etc. with semantic token classes, and replace excessive rounding classes with sharp radius. This is the bulk cleanup that makes the token reset from Plan 01 actually visible.

Purpose: Without this sweep, the token reset is invisible because ~264 hardcoded color classes and ~237 rounded classes bypass the CSS variable system. This plan makes the token change propagate to every page.

Output: All 15 page files cleaned of hardcoded primary-NNN colors and excessive rounding
</objective>

<execution_context>
@/home/yona279/.claude/get-shit-done/workflows/execute-plan.md
@/home/yona279/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/22-visual-architecture-rewrite/22-RESEARCH.md
@.planning/phases/22-visual-architecture-rewrite/22-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace hardcoded primary-NNN color classes in all page files</name>
  <files>src/pages/Teachers.tsx, src/pages/Students.tsx, src/pages/Orchestras.tsx, src/pages/Dashboard.tsx, src/pages/Bagruts.tsx, src/pages/Rehearsals.tsx, src/pages/TheoryLessons.tsx, src/pages/TheoryLessonDetails.tsx, src/pages/BagrutDetails.tsx, src/pages/RehearsalDetails.tsx, src/pages/Settings.tsx, src/pages/ImportData.tsx, src/pages/MinistryReports.tsx, src/pages/AuditTrail.tsx, src/pages/Profile.tsx</files>
  <action>
For every file in `src/pages/`, find and replace hardcoded primary color classes. The replacement strategy:

**Button/action backgrounds:**
- `bg-primary-500` on buttons → `bg-primary` (resolves to black via CSS var)
- `bg-primary-600` on buttons → `bg-primary` (same — one color system)
- `bg-primary-700` on buttons → `bg-primary`
- `hover:bg-primary-600` → `hover:bg-neutral-800`
- `hover:bg-primary-700` → `hover:bg-neutral-800`
- `active:bg-primary-700` → `active:bg-neutral-900`
- `active:bg-primary-800` → `active:bg-neutral-900`

**Text colors:**
- `text-primary-500` → `text-primary` (for links/accents)
- `text-primary-600` → `text-primary`
- `text-primary-700` → `text-foreground` (for strong text, since primary is now black)
- `hover:text-primary-600` → `hover:text-primary`
- `hover:text-primary-700` → `hover:text-foreground`

**Border colors:**
- `border-primary-500` → `border-primary`
- `border-primary-200` → `border-border`
- `border-primary-300` → `border-border`

**Ring/focus colors:**
- `ring-primary-500` → `ring-ring`
- `focus:ring-primary-500` → `focus:ring-ring`

**Background tints (light primary backgrounds):**
- `bg-primary-50` → `bg-muted` (light background)
- `bg-primary-100` → `bg-muted`
- `bg-primary-200` → `bg-muted`

Process each page file systematically. Read the file, identify all primary-NNN occurrences, apply the mapping above. Context-sensitive: if the class is on a button, use `bg-primary`. If it's a background tint, use `bg-muted`. If it's text on a dark surface, use `text-primary-foreground`.

**IMPORTANT:** Do NOT blindly find/replace — each occurrence needs context review. A `bg-primary-500` on a stat card badge is different from one on a button.
  </action>
  <verify>Run `grep -rn "bg-primary-[0-9]\|text-primary-[0-9]\|border-primary-[0-9]\|ring-primary-[0-9]" src/pages/` — must return ZERO results.</verify>
  <done>All 15 page files contain zero hardcoded primary-NNN color classes. Every occurrence replaced with semantic token class (bg-primary, bg-black, bg-muted, text-primary, border-border, etc.).</done>
</task>

<task type="auto">
  <name>Task 2: Replace excessive rounding classes in all page files</name>
  <files>src/pages/Teachers.tsx, src/pages/Students.tsx, src/pages/Orchestras.tsx, src/pages/Dashboard.tsx, src/pages/Bagruts.tsx, src/pages/Rehearsals.tsx, src/pages/TheoryLessons.tsx, src/pages/TheoryLessonDetails.tsx, src/pages/BagrutDetails.tsx, src/pages/RehearsalDetails.tsx, src/pages/Settings.tsx, src/pages/ImportData.tsx, src/pages/MinistryReports.tsx, src/pages/AuditTrail.tsx, src/pages/Profile.tsx</files>
  <action>
For every file in `src/pages/`, find and replace decorative rounding:

**Replacement rules:**
- `rounded-xl` → `rounded` (inherits --radius = 2px)
- `rounded-2xl` → `rounded`
- `rounded-3xl` → `rounded`
- `rounded-lg` → `rounded`
- `rounded-md` → `rounded` (on most elements) OR remove entirely on table containers

**CRITICAL EXCEPTIONS — DO NOT TOUCH:**
- `rounded-full` → KEEP as-is (avatars, circular badges, pills per locked decision)
- Any `rounded` class inside modal/dialog content → leave as-is (modals keep some rounding for floating feel)

Process: Read each page file, grep for `rounded-xl`, `rounded-2xl`, `rounded-3xl`, `rounded-lg`. Replace each with `rounded`. Then verify `rounded-full` instances are untouched.
  </action>
  <verify>Run `grep -rn "rounded-xl\|rounded-2xl\|rounded-3xl" src/pages/` — must return ZERO results. Run `grep -c "rounded-full" src/pages/*.tsx` — count must be same as before (avatars preserved).</verify>
  <done>All page files use sharp radius. No rounded-xl/2xl/3xl remains. rounded-full preserved on all avatar/pill elements.</done>
</task>

</tasks>

<verification>
1. `grep -rn "bg-primary-[0-9]" src/pages/` returns zero results
2. `grep -rn "text-primary-[0-9]" src/pages/` returns zero results
3. `grep -rn "rounded-xl\|rounded-2xl" src/pages/` returns zero results
4. `grep -c "rounded-full" src/pages/*.tsx` shows avatar elements preserved
</verification>

<success_criteria>
- Zero hardcoded primary-NNN color classes in any src/pages/ file
- Zero rounded-xl/2xl/3xl classes in any src/pages/ file
- rounded-full preserved on avatar/pill elements
- Pages render with new token palette (black buttons, cool neutrals, sharp corners)
</success_criteria>

<output>
After completion, create `.planning/phases/22-visual-architecture-rewrite/22-03-SUMMARY.md`
</output>
