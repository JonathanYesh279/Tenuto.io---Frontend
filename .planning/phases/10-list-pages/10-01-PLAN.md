---
phase: 10-list-pages
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ui/Table.tsx
  - src/components/ui/SearchInput.tsx
  - src/components/ui/Pagination.tsx
autonomous: true

must_haves:
  truths:
    - "Table rows show a warm amber hover highlight on all pages that use Table.tsx"
    - "Table headers stick to the top of the scroll container when scrolling long lists"
    - "A SearchInput component exists with a clear X button that appears when text is present"
    - "Pagination shows contextual Hebrew copy with entity name instead of generic 'items'"
  artifacts:
    - path: "src/components/ui/Table.tsx"
      provides: "Sticky thead, warm hover rows, consistent row height"
      contains: "sticky top-0"
    - path: "src/components/ui/SearchInput.tsx"
      provides: "Reusable search input with clear button"
      contains: "SearchInput"
    - path: "src/components/ui/Pagination.tsx"
      provides: "Contextual Hebrew pagination label"
      contains: "entityLabel"
  key_links:
    - from: "src/components/ui/Table.tsx"
      to: "all 5 list pages"
      via: "default import"
      pattern: "import Table from"
    - from: "src/components/ui/SearchInput.tsx"
      to: "list pages"
      via: "named import"
      pattern: "import.*SearchInput"
    - from: "src/components/ui/Pagination.tsx"
      to: "AuditTrail.tsx"
      via: "default import"
      pattern: "import Pagination from"
---

<objective>
Upgrade the three shared UI components that all 5 list pages depend on: Table.tsx (sticky headers + warm hover), SearchInput.tsx (new component for search-with-clear pattern), and Pagination.tsx (contextual Hebrew entity label).

Purpose: Centralise the five TABLE requirements (hover, sticky, pagination copy, search-clear, consistent chrome) in shared components so all pages inherit them automatically.
Output: Three upgraded/new shared components ready for per-page wiring in Plan 10-02.
</objective>

<execution_context>
@/home/yona279/.claude/get-shit-done/workflows/execute-plan.md
@/home/yona279/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-list-pages/10-RESEARCH.md
@src/components/ui/Table.tsx
@src/components/ui/Pagination.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Upgrade Table.tsx with sticky headers and warm hover rows</name>
  <files>src/components/ui/Table.tsx</files>
  <action>
Upgrade the Table component with three changes:

1. **Sticky header**: Restructure the wrapper to support sticky `thead`:
   - Outer: `overflow-hidden rounded-xl shadow-sm border border-gray-200`
   - Middle: `overflow-x-auto`
   - Inner: `max-h-[calc(100vh-280px)] overflow-y-auto` (vertical scroll container for sticky)
   - `thead` gets: `sticky top-0 z-10 bg-gray-50 shadow-[0_1px_0_0_theme(colors.gray.200)]`
   - Remove any `border-b` on `thead` (use shadow instead — borders disappear on sticky elements)

2. **Warm hover**: Replace `hover:bg-gray-50` on `<tr>` with `hover:bg-amber-50/60 transition-colors duration-150`. Apply to ALL rows, not just clickable ones (both the `isClickable` and `!isClickable` branches already have hover — just change the color).

3. **Consistent row height**: Ensure `<td>` has `py-4` and `<th>` has `py-3` (already correct — verify and keep).

Do NOT change the StatusBadge export or any other API of the Table component. The Column interface, TableProps, and all callback props remain unchanged.

RTL note: `sticky` works correctly in RTL. The `z-10` on thead is intentionally below modal z-indices (z-50).
  </action>
  <verify>
Read the modified Table.tsx and confirm:
- The wrapper has three nested divs (overflow-hidden > overflow-x-auto > max-h overflow-y-auto)
- `thead` has `sticky top-0 z-10` classes
- `thead` uses `shadow-[...]` instead of `border-b`
- Row hover uses `hover:bg-amber-50/60` not `hover:bg-gray-50`
  </verify>
  <done>Table.tsx renders sticky headers in a scroll container and warm amber hover on all rows. Existing API unchanged.</done>
</task>

<task type="auto">
  <name>Task 2: Create SearchInput component and upgrade Pagination with entityLabel</name>
  <files>src/components/ui/SearchInput.tsx, src/components/ui/Pagination.tsx</files>
  <action>
**SearchInput.tsx (NEW):**

Create `src/components/ui/SearchInput.tsx` with:

```tsx
import { Search, X, Loader } from 'lucide-react'
import { cn } from '@/lib/utils'

interface SearchInputProps {
  value: string
  onChange: (value: string) => void
  onClear: () => void
  placeholder?: string
  className?: string
  isLoading?: boolean
}

export function SearchInput({ value, onChange, onClear, placeholder, className, isLoading }: SearchInputProps) {
  return (
    <div className={cn('relative', className)}>
      <span className="absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none">
        {isLoading
          ? <Loader className="w-4 h-4 text-muted-foreground animate-spin" />
          : <Search className="w-4 h-4 text-muted-foreground" />
        }
      </span>
      <input
        type="text"
        value={value}
        onChange={(e) => onChange(e.target.value)}
        placeholder={placeholder}
        className="w-full pr-10 pl-8 py-2 border border-input rounded-lg
                   bg-background text-sm text-foreground placeholder:text-muted-foreground
                   focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent
                   transition-colors"
      />
      {value && (
        <button
          type="button"
          onClick={onClear}
          className="absolute left-2 top-1/2 -translate-y-1/2 p-0.5 rounded
                     text-muted-foreground hover:text-foreground transition-colors"
          aria-label="נקה חיפוש"
        >
          <X className="w-4 h-4" />
        </button>
      )}
    </div>
  )
}
```

RTL note: `right-3` = visual start (search icon), `left-2` = visual end (X clear). This is correct for RTL since the document has `dir="rtl"` and Tailwind right/left are physical properties.

**Pagination.tsx UPGRADE:**

Add `entityLabel` prop to PaginationProps interface:
```ts
entityLabel?: string  // "תלמידים" | "מורים" | "חזרות" | "רשומות"
```

Change the page info text from:
```
מציג {startItem}-{endItem} מתוך {totalItems} פריטים
```
to:
```
מציג {startItem}–{endItem} מתוך {totalItems} {entityLabel ?? 'פריטים'}
```

Use an en-dash (–) not a hyphen (-) for the range separator, as is standard in Hebrew typography.

No other changes to Pagination.tsx.
  </action>
  <verify>
1. Confirm SearchInput.tsx exists and exports `SearchInput` with value/onChange/onClear/placeholder/className/isLoading props
2. Confirm the X button renders conditionally when `value` is truthy
3. Confirm Pagination.tsx interface includes `entityLabel?: string`
4. Confirm the page info text uses `entityLabel ?? 'פריטים'`
  </verify>
  <done>SearchInput component exists with clear-X button. Pagination shows contextual entity label with fallback to "פריטים".</done>
</task>

</tasks>

<verification>
1. Table.tsx compiles (grep for `sticky top-0` in the file)
2. SearchInput.tsx exists and has `X` icon conditional on `value`
3. Pagination.tsx has `entityLabel` in its props interface
4. No import errors introduced (all imports use existing packages: lucide-react, clsx, @/lib/utils)
</verification>

<success_criteria>
- Table.tsx has sticky headers with shadow separator and warm amber hover rows
- SearchInput.tsx is a new reusable component with search icon and conditional X clear button
- Pagination.tsx accepts an optional `entityLabel` prop for contextual Hebrew copy
- All three components maintain backward compatibility (existing callers unchanged)
</success_criteria>

<output>
After completion, create `.planning/phases/10-list-pages/10-01-SUMMARY.md`
</output>
